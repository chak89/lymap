<!DOCTYPE html>
<html lang="en">
<head>

    <!--To ensure proper rendering and touch zooming for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta charset="UTF-8">
    <title>Managing organization units - Lymap</title>
    <link rel="manifest" href="manifest.webapp" />

        <!-- Bootstrap CSS and Themes-->
    <link rel="stylesheet" href="css/bootstrap.css"/>
    <link rel="stylesheet" href="css/bootstrap-theme.css"/>

    <!-- perfect-scrollbar -->
    <link rel="stylesheet" href="css/perfect-scrollbar.min.css" />

    <!-- Main styling CSS -->
    <link rel="stylesheet" href="css/styles.css"/>

    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=weather,visualization,panoramio"></script>
    <script type="text/javascript" src="js/markerclusterer.js"></script>
    <script type="text/javascript" src="js/jquery-2.1.4.min.js"></script>
    <script type="text/javascript" src="js/angular.min.js"></script>
    <script type="text/javascript" src="js/angular-resource.min.js"></script>
    <script type="text/javascript" src="js/angular-animate.min.js"></script>
    <script type="text/javascript" src="js/ui-bootstrap-tpls-0.14.3.min.js"></script>
    <script type="text/javascript" src="js/perfect-scrollbar.min.js"></script>
    <script type="text/javascript" src="js/perfect-scrollbar.with-mousewheel.min.js"></script>
    <script type="text/javascript" src="js/angular-perfect-scrollbar.js"></script>
    <script type="text/javascript" src="js/angucompleter.js"></script>
    <script type="text/javascript" src="js/functions.js"></script>

</head>

<body ng-app="lymap">
  <div ng-controller="mapController" class="all-container">
 
     <!-- Navigation Bar - Eirik in progress-->
      <div class="search-container">

          <div class="title">
              <a class="brand" style="text-decoration: none;" href="https://wiki.uio.no/mn/ifi/inf5750/index.php/Lymap">
                Lymap <span>/ Sierra Leone</span>
              </a>
          </div>

          <div class="search">


            <!-- Display loading-gif initially -->
            <div id="loader" class="show"></div> 

               <div angucomplete-alt id="angu1" class="search-list-container"
                    placeholder="Search for facility..."
                    maxlength="50"
                    pause="100"
                    selected-object="unitSelected"
                    local-data="searchUnits"
                    search-fields="name"
                    title-field="name"
                    level-name="levelName"
                    minlength="0"
                    input-class="form-control form-control-small"
                    match-class="highlight">
               </div> <!-- Angucomplete -->

               <!--Testing coords-->
                <div>Latitude: {{latlng[0]}}
               <br>
               longitude: {{latlng[1]}}
               </div>
              
              <!--  TODO move select in angucompleter -->
               <select id="dropdownMenu1" name="fiterLevel"  ng-model="dataLevels" ng-change="changeFilter(dataLevels)">                  
                   <option value="">Filter</option>
                   <option ng-repeat="level in allLevels" value="{{level.level}}">{{level.name}}</option>
               </select>


          </div>
      </div> <!-- Search container -->

      <!-- container fluid -->
      <div class="map-container">
          <div class="show-buttons">
              <span>Show all:</span>
              <button ng-class="{clicked: clicked == true}" type="button" ng-click="allFacilities()">Facilities</button>
              <button ng-class="{clicked: cclicked == true}" type="button" ng-click="allChiefdoms()">Chiefdoms</button>
              <button ng-class="{clicked: dclicked == true}" type="button" ng-click="allDistricts()">Districts</button>
          </div>
            <div id="map"></div>
      </div>


           <!--    Edit a facility    -->

           <script type="text/ng-template" id="editUnitContent.html">
               <form role="form">
                    <input class="editNameButton" type="text" ng-model="editUnit.name" id="name" />
                    <input class="editNameButton" type="text" ng-model="editUnit.shortName" id="shortName" />
                    <input id="editUnitDate" type="date" id="openingDate" datetime="M/d/yyyy" name="input" ng-model="editUnit.openingDate"
                          placeholder="M/d/yyyy" min="1970-01-01" max="2015-12-31" />
                    <!--<select name="eLevel"  ng-model="editUnit.level" ng-options="level.name for level in allLevels track by level.level">-->
                    <!--</select>-->
                    <input type="submit" class="btn btn-primary" ng-click="updateUnit(editUnit)" value="Save"/>
                    <button class="btn btn-warning" type="button" ng-click="cancel()">Cancel</button>
                  </form>
                </script>




           <!--    Add a facility    -->
           <!-- TODO:
          Add following fields :parent,name,shortName,openingDate,description,code,comment,coordinates,url,contactPerson,address,email,phoneNumber
          Where name,shortName,parent and openingDate are mandatory fields. 

          We should get a list of level 3 parents to choose from.
          -->
           <script type="text/ng-template" id="addUnitContent.html">
                  <form role="form" ng-submit="addUnit()">
                    <center><b>Select Parent Node</b></center> 
                    <select class="form-control" id="mandatoryField" ng-model='selectedParent' ng-change="changedValue(selectedParent)" ng-options='name.name for name in allLevel3Units'></select>
                    <input id="mandatoryField" type="text" ng-model="addFacility.shortName" placeholder="Short org name" />
                    <input id="mandatoryField" type="text"  datetime="MM/dd/YYYY" name="input" ng-model="addFacility.openingDate"
                        placeholder="yyyy-MM-dd" min="1970-01-01" max="2015-12-31" />
                    <input class="addUnitBtns" type="text" ng-model="addFacility.name" placeholder="Full org name" />
                    <input class="addUnitBtns" type="text" ng-model="addFacility.description" placeholder="Description" />
                    <input class="addUnitBtns" type="text" ng-model="addFacility.code" placeholder="Code" />
                    <input class="addUnitBtns" type="text" ng-model="addFacility.comment" placeholder="Comments here" />
                    <input class="addUnitBtns" type="coordinates" ng-model="addFacility.coordinates" placeholder="Coordinates" />
                    <input class="addUnitBtns" type="text" ng-model="addFacility.url" placeholder="URL" />
                    <input class="addUnitBtns" type="text" ng-model="addFacility.contactPerson" placeholder="contactPerson" />
                    <input class="addUnitBtns" type="text" ng-model="addFacility.address" placeholder="Address" />
                    <input class="addUnitBtns" type="text" ng-model="addFacility.email" placeholder="Email" />
                    <input class="addUnitBtns" type="text" ng-model="addFacility.phoneNumber" placeholder="Phonenumber" />
                    
                    <input type="submit" class="btn btn-primary" value="Save"/>                   
                    <button class="btn btn-warning" type="button" ng-click="cancel()">Cancel</button>
               </form> <!-- End form -->
           </script>


    </div><!-- map controller -->



  </body>
</html>
